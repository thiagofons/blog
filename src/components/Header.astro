---
// Imports
import logo from "@assets/logo.svg";
import thiago from "@assets/thiago.jpg";
import navigationData from "@data/navigationData";
import {
getLangFromUrl,
useTranslatedPath,
useTranslations,
} from "@i18n/utils";
import { Image } from "astro:assets";
import LanguagePicker from "./LanguagePicker.astro";

// Translations
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
---

<header class="nav-header" role="banner">
    <!-- Mobile menu toggle (CSS only) -->
    <input
        type="checkbox"
        id="mobile-menu-toggle"
        class="mobile-menu-checkbox"
        aria-label="Toggle mobile menu"
    />

    <div class="flex items-center justify-between">
        <a
      href={translatePath("/")}
      class="logo flex flex-row items-center gap-2"
      aria-label={t("main.title")}
      tabindex="0"
    >
      <Image class="max-w-12 rounded-full" src={thiago} alt={"Thiago"} loading="eager" width={100} />
      <Image src={logo} alt={t("main.title")} loading="eager" width={100} />
    </a>

        <label for="mobile-menu-toggle" class="mobile-menu-toggle">
            <span></span>
            <span></span>
            <span></span>
        </label>
    </div>

    <nav class="nav-main" role="navigation" aria-label="Main navigation">
        <ul class="nav-list" role="menubar">
            {
                navigationData.map((item) => (
                    <li class="nav-item lg:relative" role="none">
                        <a
                            href={translatePath(item.href)}
                            class="nav-link block"
                            role="menuitem"
                            aria-label={t(item.label)}
                        >
                            {t(item.label)}
                        </a>

                        {item.children?.length > 0 && (
                            <ul
                                class="nav-dropdown"
                                role="menu"
                                aria-label={`${t(item.label)}`}
                            >
                                {item.children.map((child: any) => (
                                    <li role="none">
                                        <a
                                            href={translatePath(child.href)}
                                            class="nav-dropdown-link"
                                            role="menuitem"
                                            aria-label={t(child.label)}
                                        >
                                            {t(child.label)}
                                        </a>
                                    </li>
                                ))}
                            </ul>
                        )}
                    </li>
                ))
            }
        </ul>
        <div class="nav-actions">
            <LanguagePicker />
            <a
                href="https://github.com/thiagofons"
                aria-label="GitHub"
                target="_blank"
                rel="noopener noreferrer"
                tabindex="0"
                class="hover:opacity-50"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="28"
                    height="28"
                    viewBox="0 0 16 16"
                    aria-hidden="true"
                    focusable="false"
                >
                    <path
                        fill="currentColor"
                        d="M8 0c4.42 0 8 3.58 8 8a8.01 8.01 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38c0-.27.01-1.13.01-2.2c0-.75-.25-1.23-.54-1.48c1.78-.2 3.65-.88 3.65-3.95c0-.88-.31-1.59-.82-2.15c.08-.2.36-1.02-.08-2.12c0 0-.67-.22-2.2.82c-.64-.18-1.32-.27-2-.27s-1.36.09-2 .27c-1.53-1.03-2.2-.82-2.2-.82c-.44 1.1-.16 1.92-.08 2.12c-.51.56-.82 1.28-.82 2.15c0 3.06 1.86 3.75 3.64 3.95c-.23.2-.44.55-.51 1.07c-.46.21-1.61.55-2.33-.66c-.15-.24-.6-.83-1.23-.82c-.67.01-.27.38.01.53c.34.19.73.9.82 1.13c.16.45.68 1.31 2.69.94c0 .67.01 1.3.01 1.49c0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8"
                    ></path>
                </svg>
            </a>
        </div>
    </nav>
</header>
